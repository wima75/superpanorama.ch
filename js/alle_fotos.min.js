var initPhotoSwipeFromDOM=function(e){for(var d=function(e){document.title=e.title+" | superpanorama.ch",ga("send","pageview",e.src)},t=function(e){(e=e||window.event).preventDefault?e.preventDefault():e.returnValue=!1;var t=function e(t,n){return t&&(n(t)?t:e(t.parentNode,n))}(e.target||e.srcElement,function(e){return e.tagName&&"FIGURE"===e.tagName.toUpperCase()});if(t){for(var n,i=t.parentNode,r=t.parentNode.childNodes,o=r.length,a=0,l=0;l<o;l++)if(1===r[l].nodeType){if(r[l]===t){n=a;break}a++}return 0<=n&&u(n,i),!1}},u=function(e,t,n,i){var r,o,a,l=document.querySelectorAll(".pswp")[0];if(a=function(e){for(var t,n,i,r,o=e.childNodes,a=o.length,l=[],u=0;u<a;u++)1===(t=o[u]).nodeType&&(i=(n=t.children[0]).getAttribute("data-size").split("x"),r={src:n.getAttribute("href"),w:parseInt(i[0],10),h:parseInt(i[1],10),pid:n.getAttribute("data-pid")},1<t.children.length&&(r.title=t.children[1].innerHTML),0<n.children.length&&(r.msrc=n.children[0].getAttribute("src")),r.el=t,l.push(r));return l}(t),o={showAnimationDuration:0,galleryUID:"AlleFotos",galleryPIDs:!0,history:!0,getThumbBoundsFn:function(e){var t=a[e].el.getElementsByTagName("img")[0],n=window.pageYOffset||document.documentElement.scrollTop,i=t.getBoundingClientRect(),r=(i.height-327/981*i.height)/2;return{x:i.left,y:i.top+n+r,w:i.width}}},i)if(o.galleryPIDs){for(var u=0;u<a.length;u++)if(a[u].pid==e){o.index=u;break}}else o.index=parseInt(e,10)-1;else o.index=parseInt(e,10);isNaN(o.index)||(n&&(o.showAnimationDuration=0),d(a[o.index]),(r=new PhotoSwipe(l,PhotoSwipeUI_Default,a,o)).init(),r.listen("afterChange",function(){var e=this.getCurrentIndex();d(a[e])}))},n=document.querySelectorAll(e),i=0,r=n.length;i<r;i++)n[i].setAttribute("data-pswp-uid",i+1),n[i].onclick=t;var o,a=function(){var e=window.location.hash.substring(1),t={};if(e.length<5){var n=window.location.pathname.match(/^\/portfolio\/([A-z_]+)\/([A-z]+)(.jpg)?$/i);return null==n?null:(t.gid=n[1],t.pid=n[2],t)}for(var i=e.split("&"),r=0;r<i.length;r++)if(i[r]){var o=i[r].split("=");o.length<2||(t[o[0]]=o[1])}return t}();null!=a&&(a.gid,o=a.pid,u(o,n[0],!0,!0))};$(function(){$("body").scrollspy({target:".navbar-fixed-top",offset:75}),initPhotoSwipeFromDOM(".allPhoto")});